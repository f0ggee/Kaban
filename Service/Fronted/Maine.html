<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Filesb — file sharing</title>

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap" rel="stylesheet">

    <style>
        :root {
            --bg:#0a0a0a; --text:#d1fae5; --muted:#34d399; --border:#064e3b;
            --primary:#10b981; --primary-press:#059669;
        }

        *,*::before,*::after{ box-sizing:border-box; }

        html,body{ height:100%; margin:0; background:var(--bg); color:var(--text); font-family:"Inter",system-ui, sans-serif; }

        /* AUTO-SIZE: Контейнер и карточка подстраиваются под экран */
        .container{
            max-width:920px;
            margin:0 auto;
            /* Плавный отступ сверху от 32px до 64px */
            padding: clamp(32px, 10vh, 64px) 16px;
        }

        .card{
            background:#000;
            border:1px solid var(--border);
            border-radius:16px;
            /* Резиновые внутренние отступы */
            padding: clamp(20px, 5vw, 36px);
            box-shadow:0 0 20px rgba(16,185,129,.15);
        }

        /* AUTO-SIZE шрифта: от 24px на мобильных до 32px на ПК */
        .hero h1{
            font-size: clamp(24px, 6vw, 32px);
            font-weight:700;
            color:var(--primary);
            margin-bottom:16px;
            line-height: 1.2;
        }

        .hero p, .hero li{
            color:var(--muted);
            /* Чуть уменьшаем шрифт на очень маленьких экранах */
            font-size: clamp(14px, 4vw, 16px);
            line-height:1.6;
        }

        .divider{ height:1px; background:var(--border); margin:20px 0; }

        /* Адаптивная кнопка */
        .btn-primary{
            display:inline-block;
            padding: clamp(12px, 3vw, 14px) clamp(24px, 5vw, 32px);
            font-size: clamp(15px, 4vw, 16px);
            font-weight:600;
            border-radius:10px;
            background:var(--primary);
            color:#000;
            text-decoration:none;
            border:none;
            transition:all .15s ease;
            cursor:pointer;
            width: auto;
        }

        /* На мобильных кнопка может быть чуть шире для удобства нажатия */
        @media (max-width: 480px) {
            .btn-primary { width: 100%; text-align: center; }
        }

        .btn-primary:hover{ background:var(--primary-press); transform:translateY(-1px); }
        .center{ text-align:center; margin-top:20px; }
        .beacon{ position:absolute; left:-9999px; width:1px; height:1px; opacity:0; pointer-events:none; }
    </style>
</head>
<body>

<img class="beacon" src="/maine/api" alt="">

<div class="container">
    <section class="card hero">
        <h1 id="title" data-i18n="title">Filesb — simple file sharing</h1>
        <p><strong data-i18n="descLabel">Description:</strong></p>
        <div class="divider"></div>
        <p><strong data-i18n="featLabel">Features:</strong></p>
        <ol id="featuresList">
            <li data-i18n="f1">Minimal dark-green interface.</li>
            <li data-i18n="f2">Works on any device.</li>
            <li data-i18n="f3">Terminal-style design.</li>
        </ol>
        <div class="center">
            <a href="/login" class="btn-primary" id="startBtn" data-i18n="startBtn">Get started</a>
        </div>
    </section>
</div>

<script>
    const translations = {
        en: {
            title: "Filesb — simple file sharing",
            descLabel: "Description:",
            featLabel: "Features:",
            f1: "Minimal dark-green interface.",
            f2: "Works on any device.",
            f3: "Terminal-style design.",
            startBtn: "Get started",
            loading: "Loading..."
        },
        ru: {
            title: "Filesb — простой обмен файлами",
            descLabel: "Описание:",
            featLabel: "Особенности:",
            f1: "Минималистичный темно-зеленый интерфейс.",
            f2: "Работает на любом устройстве.",
            f3: "Дизайн в стиле терминала.",
            startBtn: "Начать работу",
            loading: "Загрузка..."
        }
    };

    let currentLang = localStorage.getItem('userLanguage') || 'en';

    function applyLanguage() {
        document.querySelectorAll('[data-i18n]').forEach(el => {
            const key = el.getAttribute('data-i18n');
            if (translations[currentLang][key]) {
                el.textContent = translations[currentLang][key];
            }
        });
    }

    const btn = document.getElementById('startBtn');
    btn.addEventListener('click', function (e) {
        e.preventDefault();
        const fallbackHref = btn.getAttribute('href') || '/login';
        btn.textContent = translations[currentLang].loading;

        fetch('/maine/api', {
            method: 'GET',
            credentials: 'same-origin',
            cache: 'no-store',
            redirect: 'follow'
        })
            .then(res => {
                if (res.redirected && res.url) {
                    window.location.replace(res.url);
                    return;
                }
                window.location.href = fallbackHref;
            })
            .catch(() => {
                window.location.href = fallbackHref;
            });
    });

    applyLanguage();
</script>
</body>
</html>